<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>瀑布流</title>
	<!-- 引入层叠样式表 -->
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<!-- 图片及容器叠加 -->
	<div class="box">
		<div class="content">
			<img src="images/2e2eb9389b504fc2b1ba9b48e6dde71191ef6d91.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/e4dde71190ef76c6e39e8a519e16fdfaaf51677f.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/3bf33a87e950352afebb34455043fbf2b3118ba0.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/f31fbe096b63f624810a56798444ebf81a4ca371.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/4afbfbedab64034fb7b2d44bacc379310a551d7b.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/7e3e6709c93d70cf5b67c377fbdcd100baa12b2e.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/9e3df8dcd100baa1b31531c14410b912c8fc2e8a.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/14ce36d3d539b6000bf51dfaea50352ac65cb747.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/63d0f703918fa0ec05984e40259759ee3d6ddb1b.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/2e2eb9389b504fc2b1ba9b48e6dde71191ef6d91.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/2e2eb9389b504fc2b1ba9b48e6dde71191ef6d91.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/e4dde71190ef76c6e39e8a519e16fdfaaf51677f.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/3bf33a87e950352afebb34455043fbf2b3118ba0.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/f31fbe096b63f624810a56798444ebf81a4ca371.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/4afbfbedab64034fb7b2d44bacc379310a551d7b.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/7e3e6709c93d70cf5b67c377fbdcd100baa12b2e.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/9e3df8dcd100baa1b31531c14410b912c8fc2e8a.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/14ce36d3d539b6000bf51dfaea50352ac65cb747.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/63d0f703918fa0ec05984e40259759ee3d6ddb1b.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/2e2eb9389b504fc2b1ba9b48e6dde71191ef6d91.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/2e2eb9389b504fc2b1ba9b48e6dde71191ef6d91.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/e4dde71190ef76c6e39e8a519e16fdfaaf51677f.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/3bf33a87e950352afebb34455043fbf2b3118ba0.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/f31fbe096b63f624810a56798444ebf81a4ca371.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/4afbfbedab64034fb7b2d44bacc379310a551d7b.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/7e3e6709c93d70cf5b67c377fbdcd100baa12b2e.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/9e3df8dcd100baa1b31531c14410b912c8fc2e8a.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/14ce36d3d539b6000bf51dfaea50352ac65cb747.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/63d0f703918fa0ec05984e40259759ee3d6ddb1b.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/2e2eb9389b504fc2b1ba9b48e6dde71191ef6d91.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/2e2eb9389b504fc2b1ba9b48e6dde71191ef6d91.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/e4dde71190ef76c6e39e8a519e16fdfaaf51677f.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/3bf33a87e950352afebb34455043fbf2b3118ba0.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/f31fbe096b63f624810a56798444ebf81a4ca371.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/4afbfbedab64034fb7b2d44bacc379310a551d7b.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/7e3e6709c93d70cf5b67c377fbdcd100baa12b2e.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/9e3df8dcd100baa1b31531c14410b912c8fc2e8a.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/14ce36d3d539b6000bf51dfaea50352ac65cb747.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/63d0f703918fa0ec05984e40259759ee3d6ddb1b.jpg">
		</div>
	</div>
	<div class="box">
		<div class="content">
			<img src="images/2e2eb9389b504fc2b1ba9b48e6dde71191ef6d91.jpg">
		</div>
	</div>
	</div>

</body>
<!-- 引入jquery -->
<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<!-- 自定义的js， -->
<script type="text/javascript">
	$(document).ready(function(){
		$(window).on("load",function(){
			 imageLocation();//给图片定义位置
			 /*滚动时监测事件*/
			 $(window).scroll(function(){
			 	if(scrollSide){
			 		//要添加的图片数组
			 		arr = ['2e2eb9389b504fc2b1ba9b48e6dde71191ef6d91.jpg',
							'e4dde71190ef76c6e39e8a519e16fdfaaf51677f.jpg',
							'3bf33a87e950352afebb34455043fbf2b3118ba0.jpg',
							'f31fbe096b63f624810a56798444ebf81a4ca371.jpg',
							'f31fbe096b63f624810a56798444ebf81a4ca371.jpg',
							'7e3e6709c93d70cf5b67c377fbdcd100baa12b2e.jpg',
							'9e3df8dcd100baa1b31531c14410b912c8fc2e8a.jpg'
						];
						//将图片添加到页面中
						$.each(arr,function(index,val){
							$box = $("<div></div>").addClass("box");
							$content = $("<div></div>").addClass("content");
							$img = $("<img>").attr("src","images/"+val);
							$box.append($content);
							$content.append($img);
							$("body").append($box);
						});
						//将新添加的图片重新定位
						imageLocation();
				}
			 });
		});
	});
	function scrollSide(){
		$last = $(".box").last().height()/2;
		return ($(window).scrollTop() + $(window).height() >= $(document).height() - $last);
	}
	function imageLocation(){
		var box_width = $(".box").eq(0).width();
		var num = Math.floor($(window).width()/box_width);
		var boxs = [];
		$(".box").each(function(index,val){
			var box_height = $(this).height();
			if(index<num){
				boxs[index] = box_height;
			}else{
				var min_hei = Math.min.apply(null,boxs);
				var min_index = $.inArray(min_hei,boxs);
				$(this).css({
					"position":"absolute",
					"left": $(".box").eq(min_index).position().left,
					"top": min_hei
				});
				boxs[min_index] += $(this).height();
			}
		});
	}
</script>
</html>